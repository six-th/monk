
http://jslmes.blog.51cto.com/5008224/1427146虚拟磁盘类型在虚拟磁盘库中定义了如下这些磁盘类型：单片稀疏型 VIXDISKLIB_DISK_MONOLITHIC_SPARSE只包含一个虚拟磁盘文件并能够动态扩展的虚拟磁盘。这是主机磁盘(hosted disk)的默认类型，在第五章中的例子中也只用到这种类型。单片平面型 VIXDISKLIB_DISK_MONOLITHIC_FLAT只包含一个虚拟磁盘文件，提前分配存储空间的虚拟磁盘。创建这种磁盘需要较多的时间，并占用大量空间，但是可能会提供比稀疏型磁盘更好的性能。分片稀疏型 VIXDISKLIB_DISK_SPLIT_SPARSE可扩展的虚拟磁盘，整个磁盘被分为多个2GB大小的关联文件。这些文件可以增大到2GB，然后在新的文件中继续扩展。这种类型可以在老的文件系统上使用。分片平面型 VIXDISKLIB_DISK_SPLIT_FLAT提前分配空间的虚拟磁盘，并被分为多个大小为2GB的虚拟磁盘文件。这些从2GB开始，所以创建它们需要较长的时间，但是可以以2GB持续增长。VMFS平面型VIXDISKLIB_DISK_VMFS_FLAT提前分配空间的虚拟磁盘，在ESX3或更新的平台上可用，也叫做厚型磁盘(thick disk)，是一种管理磁盘(managed disk)。VMFS稀疏型VIXDISKLIB_DISK_VMFS_SPARSE使用一种写时复制(copy-on-write, COW)机制来节省存储空间。VMFS精简型VIXDISKLIB_DISK_VMFS_THIN这种类型假设需要尽可能多的空间，然后以此来扩展虚拟磁盘的大小。能够在ESX3以及更新的平台上使用，VDDK 1.1或更新的版本中支持，建议使用高版本的VDDK。单片流优化 VIXDISKLIB_DISK_STREAM_OPTIMIZED单片、稀疏格式对数据流进行压缩。这种格式不支持随机读写。






表4-1. 虚拟磁盘库函数函数描述VixDiskLib_Attach将子磁盘链附加到父磁盘链上。VixDiskLib_Cleanup清除遗留的传输信息。VixDiskLib_Clone将虚拟磁盘拷贝到指定目标，并转换成适当的格式。VixDiskLib_Close关闭一个打开的虚拟磁盘。VixDiskLib_Connect连接到虚拟磁盘库以获取相关服务。VixDiskLib_ConnectEx连接到高级的传输。VixDiskLib_Create根据指定参数创建虚拟磁盘文件。VixDiskLib_CreateChild针对主机磁盘创建一个子磁盘(重做日志或差异磁盘)。VixDiskLib_Defragment对虚拟磁盘的扇区进行碎片整理。
VixDiskLib_Disconnect断开虚拟磁盘库的连接VixDiskLib_EndAccess通知主机可能需要迁移一个虚拟机。VixDiskLib_Exit释放库占用的所有资源。VixDiskLib_FreeErrorText释放GetErrorText获得的消息缓存。VixDiskLib_FreeInfo释放GetInfo分配的缓存。VixDiskLib_GetErrorText获取错误码的文字描述。VixDiskLib_GetInfo获取虚拟磁盘的信息。VixDiskLib_GetMetadataKeys获取虚拟磁盘元数据中的所有键。VixDiskLib_GetTransportMode获取当前的传世模式。VixDiskLib_Grow扩展已有虚拟磁盘的大小。
VixDiskLib_Init初始化老的虚拟磁盘库，已经被InitEx代替。VixDiskLib_InitEx初始化新的虚拟磁盘库。VixDiskLib_ListTransportModes获取可用的传输模式。VixDiskLib_Open打开虚拟磁盘。VixDiskLib_PrepareForAccess通知主机避免迁移虚拟机。VixDiskLib_Read从打开的虚拟磁盘上读取数据。VixDiskLib_ReadMetadata从虚拟磁盘的元数据中读取指定键的值。VixDiskLib_Rename重新命名虚拟磁盘。VixDiskLib_Shrik从虚拟磁盘中回收空的扇区。VixDiskLib_SpaceNeededForClone计算克隆一个虚拟磁盘需要的空间大小(字节)。
VixDiskLib_Unlink删除指定的虚拟磁盘。VixDiskLib_Write向打开的虚拟磁盘中写入数据。VixDiskLib_WriteMetadata
使用键/值对更新虚拟磁盘的元数据。








在虚拟磁盘库中定义了如下这些磁盘类型：
单片稀疏型 VIXDISKLIB_DISK_MONOLITHIC_SPARSE只包含一个虚拟磁盘文件并能够动态扩展的虚拟磁盘。这是主机磁盘(hosted disk)的默认类型，在第五章中的例子中也只用到这种类型。
单片平面型 VIXDISKLIB_DISK_MONOLITHIC_FLAT只包含一个虚拟磁盘文件，提前分配存储空间的虚拟磁盘。创建这种磁盘需要较多的时间，并占用大量空间，但是可能会提供比稀疏型磁盘更好的性能。
分片稀疏型 VIXDISKLIB_DISK_SPLIT_SPARSE可扩展的虚拟磁盘，整个磁盘被分为多个2GB大小的关联文件。这些文件可以增大到2GB，然后在新的文件中继续扩展。这种类型可以在老的文件系统上使用。
分片平面型 VIXDISKLIB_DISK_SPLIT_FLAT提前分配空间的虚拟磁盘，并被分为多个大小为2GB的虚拟磁盘文件。这些从2GB开始，所以创建它们需要较长的时间，但是可以以2GB持续增长。
VMFS平面型VIXDISKLIB_DISK_VMFS_FLAT提前分配空间的虚拟磁盘，在ESX3或更新的平台上可用，也叫做厚型磁盘(thick disk)，是一种管理磁盘(managed disk)。
VMFS稀疏型VIXDISKLIB_DISK_VMFS_SPARSE使用一种写时复制(copy-on-write, COW)机制来节省存储空间。
VMFS精简型VIXDISKLIB_DISK_VMFS_THIN这种类型假设需要尽可能多的空间，然后以此来扩展虚拟磁盘的大小。能够在ESX3以及更新的平台上使用，VDDK 1.1或更新的版本中支持，建议使用高版本的VDDK。
单片流优化 VIXDISKLIB_DISK_STREAM_OPTIMIZED单片、稀疏格式对数据流进行压缩。这种格式不支持随机读写。
