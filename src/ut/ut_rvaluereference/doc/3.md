

# 3.左值引用和右值引用

###值和引用是两个概念
![这里写图片描述](https://img-blog.csdn.net/20180524181026484?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dPVzU0MjYyMTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)


示例:
右值       是表达式的值,   例如42;
右值引用,  是表达式的类型, 例如int&&


### 左右值与表达式类型没有直接关系，它们都是表达式的属性
右值引用类型的具名变量/对象是左值,  例如下面例子中的num
右值引用类型的匿名变量/对象是右值,  例如下面例子中的func_R()
```c++
int&& func_R()
{
    int ret = 1024;
    return std::move(ret);
}

TEST(ut_RvalueRef, RvalueRef1)
{
    int&& num = 100;
    MK_PRINT_MSG("100             is %c-value", IsRight(100));//字面量
    MK_PRINT_MSG("num             is %c-value", IsRight(num));//具名的[右值引用]类型的[左值]变量
    
    int&& result = func_R();
    MK_PRINT_MSG("func_R          is %c-value", IsRight(func_R));//函数名(函数指针)
    MK_PRINT_MSG("func_R()        is %c-value", IsRight(func_R() ));//函数返回值-匿名对象
    MK_PRINT_MSG("result          is %c-value", IsRight(result));//函数返回值-具名对象
}
/*
源码路径:
ut_rvaluereference\referenceType\ut_RvalueRef.cpp
*/
```

运行结果:
![这里写图片描述](https://img-blog.csdn.net/20180524181040555?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dPVzU0MjYyMTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)


### 引用类型可以引用的值类别
```c++
TEST(ut_RvalueRef, RvalueRef2)
{
    //T&
    //const T&
    //T&&
    //const T&&
    
    int n = 100;
    const int const_n = 200;
    
    int& L_Ref_to_L = n;                                            //引用自->非const左值

    const int& cL_ref_to_L = n;                                     //引用自->非const左值
    const int& cL_ref_to_cL = const_n;                              //引用自->  const左值
    const int& cL_ref_to_R = static_cast<int&&>(n);                 //引用自->非const右值
    const int& cL_ref_to_cR = static_cast<const int&&>(const_n);    //引用自->  const右值
    
    int&& R_ref_to_R = static_cast<int&&>(n);                       //引用自->非const右值
    
    const int&& cR_ref_to_R = static_cast<int&&>(n);                //引用自->非const右值
    const int&& cR_ref_to_cR = static_cast<const int&&>(const_n);   //引用自->  const右值
}
/*
源码路径:
ut_rvaluereference\referenceType\ut_RvalueRef.cpp
*/
```
总结:
![这里写图片描述](https://img-blog.csdn.net/20180524181051655?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1dPVzU0MjYyMTEyNg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

常量左值引用是个“万能”的引用类型。它可以接受非常量左值、常量左值、右值对其进行初始化。
常量左值引用可以使用右值进行初始化，这时它可以像右值引用一样将右值的生命期延长(但所引用的右值在之后的生命周期内是只读);


