```
RAID和跨区卷

raid0
性能最高;
它将连续的数据分散的存放在多个磁盘中,当访问数据时,可以并发读取数据;
实现raid0必须有两个以上磁盘;
缺点:没有数据差错控制,其中一个磁盘损坏,则其他磁盘数据也无法正确获取;





raid1:
数据安全性最高；
镜像条带，至少要两块磁盘；
两个磁盘内容是完全一样的；
缺点：磁盘利用率只有50%；是所有raid中最低；




raid2：
比较少见，略；

raid3：
带奇偶校验码的并行传送；
组建raid3至少要3个磁盘；其中一个磁盘专门作为存储校验；
raid3按字节为单位对数据进行拆分并交替写入数据盘，这样可提高读写速度；
它像raid0一样并行存放数据，但在写入数据时会产生校验码并保存在另一个单独的磁盘中，因此速度比raid0稍差；



校验值的计算，一般是按照异或计算；可允许一块数据盘失效；



raid4：
raid4同raid3类似，区别在于它对数据的访问是按数据块进行的，而不像raid3按字节进行；
组建raid4也最少需要3块磁盘；


raid5：
分布式奇偶校验码；
与raid4类似，但是他的奇偶校验码分散的存放在不同磁盘上，磁盘利用率N-1；
可允许单块盘出错；


raid5中，因校验块的循环方向、数据块的排列方式不同，存在多种不同的阵列布局；




而数据块的写入，也分为两种：异步和同步；
异步：写满一个条带需要转入下一个条带时，直接回到0号盘进行写入；这种方式不考虑校验块的位置；

同步：写满一个条带后，先判断下一个条带的校验块所在磁盘，然后将数据写入到校验块所在磁盘的下一个磁盘；写满一个磁盘后，转入高号盘，直到高号盘写满后，再转入0号盘写入；


根据数据块同步异步模式和校验块的循环方向；
可组合为以下几种结构：
左循环异步；
左循环同步；
右循环异步；
右循环同步；



组合raid：
raid10
raid53
raid50
raid51

raid6：
raid6与raid5相似，但是它设定两个校验码，并将校验码写入到2个不同的磁盘；
由此增加磁盘容错能力；可以同时允许2块磁盘出错；但相应的阵列磁盘数量最少要4块，磁盘利用率N-2；




raid7：
价格较高，普通企业很少见；

raid1E：
工作原理与raid1基本一样，只是数恢复能力更强； 
至少要3块盘实现；



raid5E：
raid5EE；
raidDP：
略；


块：
在raid中，数据按照一定大小分段后写入到各个磁盘；在一个磁盘写入一个数据段后，就移至下一个磁盘写入；这个数据段大小依据就是阵列中的块大小；


条带：
阵列中各个磁盘内编号相同的块组成的扇区段成为条带，条带号与它的块号相同；



raid的实现：
一般分为硬raid和软raid；
硬raid：操作系统只能识别虚拟磁盘，无法识别到raid的各个成员盘；
软raid：操作系统可识别成员盘，但操作系统仅将虚拟raid卷呈现给用户使用；









LVM结构：

1. 非启动盘
|------------------|
| PVRA             |
|------------------|
| VGRA             |
|------------------|
|                  |
|                  |
|                  |
| User Data        |
|                  |
|                  |
|                  |
|------------------|
|Bad block pool    |
|------------------|

2.启动盘
|------------------|-----
| LIF header       | \
|------------------| \
| PVRA             | \
|------------------| \
| BDRA             | |-->2912K
|------------------| /
| LIF volume       | /
|------------------| /
| VGRA             | /
|------------------|-----
|                  |
|                  |
|                  |
| User Data        |
|                  |
|                  |
|                  |
|------------------|
|Bad block pool    |
|------------------|


注意：
a.启动盘的LVM表头（LVM header）总是2912KB，而对于非启动盘来说，LVM header的大小是不固定的。它取决于VG的配置参数PVs/VG（-p max_pv），PEs/PV（-e max_pe）和LVs/VG（-l max_lv），但是一般来说，非启动盘的LVM header的大小总是比启动盘的要小一些。而且，VG的VGRA一定不能大于一个单独的块的大小。








有个命令:
vgdisplay:


































```